<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User ATM Dashboard</title>

    <!-- Your CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- REQUIRED map height -->
    <style>
        #map {
            height: 400px;
            width: 100%;
            border-radius: 12px;
        }
    </style>
</head>
<body>
<div class="user-wrap">

    <header class="user-hero">
        <div>
            <h1>üë§ User ATM Dashboard</h1>
            <p class="subtitle">Smart ATM Cash Availability Near You</p>
        </div>
        <button class="btn ghost" onclick="window.location.href='{{ url_for('logout') }}'">Logout</button>
    </header>

    <div class="user-search">
        <input type="text" id="searchATM" placeholder="Search ATM or Location">
        <span class="hint">Live map updates with nearest ATMs</span>
    </div>

    <section class="user-cards">
        <div class="pill-card pill-blue">
            <div class="pill-icon">üìç</div>
            <div class="pill-meta">
                <p class="pill-label">Nearest ATM</p>
                <p class="pill-value"><span id="nearestATMName">---</span> <span class="muted" id="nearestATMDistance">--</span></p>
            </div>
        </div>

        <div class="pill-card pill-green">
            <div class="pill-icon">üí∞</div>
            <div class="pill-meta">
                <p class="pill-label">Cash Status</p>
                <p class="pill-value" id="cashStatus">---</p>
            </div>
        </div>

        <div class="pill-card pill-amber">
            <div class="pill-icon">‚è∞</div>
            <div class="pill-meta">
                <p class="pill-label">Best Time</p>
                <p class="pill-value">10 AM ‚Äì 12 PM</p>
            </div>
        </div>
    </section>

    <section class="map-grid">
        <div class="map-panel">
            <div class="panel-head">
                <div class="panel-title">ATM Map View</div>
                <div class="panel-sub">Available, Low Cash, You</div>
            </div>
            <div id="map" class="map-frame"></div>
            <div class="map-legend">
                <span class="legend-dot green"></span> Available
                <span class="legend-dot red"></span> Low Cash
                <span class="legend-dot blue"></span> You
            </div>
        </div>

        <aside class="side-panel">
            <div class="panel-head">
                <div class="panel-title">ATM Map View</div>
                <div class="panel-sub">Sorted by distance</div>
            </div>
            <div id="atmListSummary" class="atm-list"></div>
            <button class="btn primary full">View All ATMs</button>
            <div class="notice">ATM demand often increases after 6 PM</div>
        </aside>
    </section>

    <section class="table-card">
        <div class="panel-head">
            <div class="panel-title">ATM Map View</div>
            <div class="panel-sub">Detailed availability</div>
        </div>
        <table id="atmTable">
            <tr>
                <th>ATM ID</th>
                <th>Location</th>
                <th>Distance</th>
                <th>Status</th>
            </tr>
        </table>
    </section>

</div>

<!-- Leaflet JS (MUST be before main.js) -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- User Dashboard JS -->
<script src="{{ url_for('static', filename='user_dashboard.js') }}"></script>

</body>
</html>
